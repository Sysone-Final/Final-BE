spring:
  application:
    name: Final-BE # 애플리케이션 이름

  # === 데이터베이스 설정 ===
  datasource:
    driver-class-name: org.postgresql.Driver # PostgreSQL JDBC 드라이버
    url: ${DB_URL} # 환경 변수에서 데이터베이스 URL 주입
    username: ${DB_USERNAME} # 환경 변수에서 사용자명 주입
    password: ${DB_PASSWORD} # 환경 변수에서 비밀번호 주입

    # HikariCP 커넥션 풀 설정 (성능 최적화)
    hikari:
      maximum-pool-size: 10 # 최대 커넥션 수
      minimum-idle: 2 # 최소 유휴 커넥션 수
      connection-timeout: 30000 # 커넥션 타임아웃 (30초)
      idle-timeout: 600000 # 유휴 커넥션 타임아웃 (10분)
      max-lifetime: 1800000 # 커넥션 최대 생존 시간 (30분)
      keepalive-time: 300000 # 커넥션 유지 시간 (5분)
      validation-timeout: 5000 # 검증 타임아웃 (5초)
      connection-test-query: SELECT 1 # 커넥션 검증 쿼리
      leak-detection-threshold: 60000 # 커넥션 누수 감지 임계값 (60초)

  # === JPA/Hibernate 설정 ===
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect # PostgreSQL 방언
    hibernate:
      ddl-auto: create-drop # DDL 자동 생성 전략 (개발: create-drop, 운영: validate)
      # create-drop: 애플리케이션 시작 시 테이블 생성, 종료 시 삭제
      # validate: 엔티티와 테이블 구조가 일치하는지만 검증
    show-sql: false # SQL 쿼리 콘솔 출력 여부 (개발: true, 운영: false)
    properties:
      hibernate:
        format_sql: false # SQL 쿼리 포맷팅 여부
        use_sql_comments: true # SQL 주석 출력 여부
    open-in-view: false # OSIV(Open Session In View) 비활성화 (성능 최적화)
    # OSIV를 끄면 트랜잭션 밖에서 지연 로딩 불가 (LazyInitializationException 방지)

# === JWT 설정 ===
jwt:
  secret: ${JWT_SECRET} # 환경 변수에서 JWT Secret Key 주입 (최소 32자)
  access-token-validity: 3600000 # Access Token 유효 시간 (1시간, 밀리초 단위)
  # 3600000ms = 60분 = 1시간
  refresh-token-validity: 604800000 # Refresh Token 유효 시간 (7일, 밀리초 단위)
  # 604800000ms = 7일

# === Cookie 설정 ===
cookie:
  secure: false # Cookie의 Secure 속성 (개발: false, 운영: true)
  # false: HTTP와 HTTPS 모두에서 쿠키 전송
  # true: HTTPS에서만 쿠키 전송 (보안 강화)

# === 로깅 설정 ===
logging:
  level:
    root: INFO # 전체 로그 레벨 (INFO 이상만 출력)
    com.finalbe: DEBUG # 애플리케이션 패키지는 DEBUG 레벨
    org.hibernate.SQL: WARN # Hibernate SQL 로그는 WARN 레벨
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE # SQL 파라미터 바인딩 로그 (개발 시 유용)
    com.zaxxer.hikari: WARN # HikariCP 로그는 WARN 레벨
